
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>6.2. 통계량의 분포 &#8212; 빅데이터 개론 2</title>
    
  <link href="../../_static/css/theme.css" rel="stylesheet">
  <link href="../../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystyle.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/togglebutton.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script>
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="6.3. 추정량의 성질" href="estimator.html" />
    <link rel="prev" title="6.1. 표본과 정보" href="sample.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../../_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">빅데이터 개론 2</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../intro.html">
   빅데이터 개론 2
  </a>
 </li>
</ul>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../01/intro-course.html">
   1. 서론
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../01/intro-program.html">
     1.1. 프로그래밍 언어
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../01/intro-stat.html">
     1.2. 통계학
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../02/intro-python.html">
   2. 파이선의 기초
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../02/basic-expression.html">
     2.1. 표현식과 변수
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02/data-processing-intro.html">
     2.2. 데이터의 처리
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02/data-processing-train-passenger.html">
     2.3. 고속열차 여객 수송자료
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02/data-processing-text.html">
     2.4. 어린 왕자
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../03/types.html">
   3. 자료의 형식
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../03/numbers.html">
     3.1. 숫자
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03/string.html">
     3.2. 문자열
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03/array.html">
     3.3. 행렬
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../04/dataframe.html">
   4. 데이터프레임
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../04/dataframe-intro.html">
     4.1. 데이터프레임의 정의와 구성요소
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../04/dataframe-change.html">
     4.2. 데이터프레임의 정리
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../04/dataframe-summary.html">
     4.3. 데이터프레임의 요약
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../04/dataframe-merge.html">
     4.4. 데이터프레임의 결합
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../05/data-intro.html">
   5. 분포와 확률
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../05/data_distribution.html">
     5.1. 자료의 분포
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05/data_randomness.html">
     5.2. 분포와 우연성
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05/data_random_experiment.html">
     5.3. 확률과 컴퓨터 실험
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05/data_probability.html">
     5.4. 확률의 기초
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05/data_function.html">
     5.5. 함수
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="sampling-intro.html">
   6. 표본과 경험적 분포
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
  <label for="toctree-checkbox-6">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="sample.html">
     6.1. 표본과 정보
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     6.2. 통계량의 분포
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="estimator.html">
     6.3. 추정량의 성질
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="bootstrap.html">
     6.4. 붓스트랩
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../07/test-intro.html">
   7. 유의성 검정
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
  <label for="toctree-checkbox-7">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../07/decision.html">
     7.1. 선택과 증거
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../07/pvalue.html">
     7.2. 유의성 검정
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../07/abtest.html">
     7.3. 두 그룹의 비교
    </a>
   </li>
  </ul>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../_sources/chapters/06/samplemeans.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/UOS-Bigdata/bigdatabook"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/UOS-Bigdata/bigdatabook/master?urlpath=tree/chapters/06/samplemeans.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        <a class="colab-button" href="https://colab.research.google.com/github/UOS-Bigdata/bigdatabook/blob/master/chapters/06/samplemeans.ipynb"><button type="button" class="btn btn-secondary topbarbtn"
                title="Launch Colab" data-toggle="tooltip" data-placement="left"><img class="colab-button-logo"
                    src="../../_static/images/logo_colab.png"
                    alt="Interact on Colab">Colab</button></a>
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id2">
   6.2.1. 모집단과 표본
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id3">
   6.2.2. 표본 통계량의 정확한 분포
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id4">
     6.2.2.1. 모집단
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id5">
     6.2.2.2. 표본
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id6">
     6.2.2.3. 모든 가능한 표본의 분포
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id7">
     6.2.2.4. 통계량의 정확한 분포
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id8">
   6.2.3. 표본 통계량의 경험적 분포
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id9">
     6.2.3.1. 모의실험
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id10">
     6.2.3.2. 통계량의 분포
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id11">
   6.2.4. 표본평균의 분포: 예제
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id12">
   6.2.5. 정리
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="id1">
<h1><span class="section-number">6.2. </span>통계량의 분포<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span># 한글 폰트가 깨질 때 사용 - 런타임 메뉴에서 다시 시작 및 모두 실행 선택. (출처: https://teddylee777.github.io/colab/colab-korean)
!sudo apt-get install -y fonts-nanum
!sudo fc-cache -fv
!rm ~/.cache/matplotlib -rf
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 그림 그리기를 위한 코드와 한글 실행</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">rc</span>
<span class="o">%</span><span class="n">matplotlib</span> <span class="n">inline</span>

<span class="n">plt</span><span class="o">.</span><span class="n">rc</span><span class="p">(</span><span class="s1">&#39;font&#39;</span><span class="p">,</span> <span class="n">family</span><span class="o">=</span><span class="s1">&#39;NanumBarunGothic&#39;</span><span class="p">)</span> <span class="c1"># clolab 에서 한글 사용 </span>
<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;axes.unicode_minus&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span> 
<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s2">&quot;figure.figsize&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">8</span><span class="p">)</span>   <span class="c1"># 그림 크기 조정</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id2">
<h2><span class="section-number">6.2.1. </span>모집단과 표본<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p>이제 앞에서 배운 표본에 대하여 좀 더 자세하게 배워보자. 자료를 수집하고 분석하는 일반적인 절차을 정리해 보자.</p>
<ul class="simple">
<li><p>분석의 목적은 모집단에 대한 특성을 파악하는 것이다.</p></li>
<li><p>관심 있는 모집단의 크기가 너무 커서 모든 자료를 조사할 수 없다.</p></li>
<li><p>따라서 모집단의 일부분인 표본을 추출한다.</p></li>
<li><p>추출한 표본에서 얻은 정보, 즉 표본 통계량를 이용하여 모집단의 특성을 추론한다.</p></li>
</ul>
<p>예를 들면 여러분이 흔히 보는 선거 여론조사(opinion survey)는 모든 선거구 주민(<span class="math notranslate nohighlight">\(P\)</span>)의  후보 A에 대한 모집단의 지지율을 알아내는 것이 목적이다.</p>
<p>관심이 있는 모집단의 특성은 후보 A 에 대한 지지율이다.</p>
<div class="math notranslate nohighlight">
\[ \text{모집단 지지율} = \frac{\text{모집단에서 후보 A를 지지하는 사람의 수}}{\text{모집단에 속한 사람의 수}} \]</div>
<p>모든 선거구 주민들에게 질문할 수 없으므로 표본을 추출하고 얻은 표본 지지율로 모집단의 지지율에 대한 정보를 얻는다.</p>
<p>표본 지지율은 표본에서 후보를 지지하는 사람의 수를 표본의 수로 나눈 비율이다.</p>
<div class="math notranslate nohighlight">
\[ \text{표본 지지율} = \frac{\text{표본에서 후보 A를 지지하는 사람의 수}}{\text{표본에 속한 사람의 수}} \]</div>
<p>이제 위에서 나온 중요한 용어의 정의와 기호를  정리해 보자.</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="text-align:center head"><p>용어</p></th>
<th class="text-align:center head"><p>기호</p></th>
<th class="text-align:center head"><p>정의</p></th>
<th class="text-align:center head"><p>예</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-align:center"><p>모집단(population)</p></td>
<td class="text-align:center"><p><span class="math notranslate nohighlight">\(P\)</span></p></td>
<td class="text-align:center"><p>관심이 있는 전체집단</p></td>
<td class="text-align:center"><p>모든 선거구 주민</p></td>
</tr>
<tr class="row-odd"><td class="text-align:center"><p>모집단의 수</p></td>
<td class="text-align:center"><p><span class="math notranslate nohighlight">\(N\)</span></p></td>
<td class="text-align:center"><p>전체집단에 속한 개체 수</p></td>
<td class="text-align:center"><p>모든 선거구 주민의 수</p></td>
</tr>
<tr class="row-even"><td class="text-align:center"><p>모수(parameter)</p></td>
<td class="text-align:center"><p><span class="math notranslate nohighlight">\(\theta\)</span></p></td>
<td class="text-align:center"><p>모집단의 특성값</p></td>
<td class="text-align:center"><p>모집단의 지지율</p></td>
</tr>
<tr class="row-odd"><td class="text-align:center"><p>표본(sample)</p></td>
<td class="text-align:center"><p><span class="math notranslate nohighlight">\(S\)</span></p></td>
<td class="text-align:center"><p>모집단의 부분 집합</p></td>
<td class="text-align:center"><p>표본으로 추출된 주민</p></td>
</tr>
<tr class="row-even"><td class="text-align:center"><p>표본의 수</p></td>
<td class="text-align:center"><p><span class="math notranslate nohighlight">\(n\)</span></p></td>
<td class="text-align:center"><p>표본에 속한 개체 수</p></td>
<td class="text-align:center"><p>표본으로 추출된 선거구 주민의 수</p></td>
</tr>
<tr class="row-odd"><td class="text-align:center"><p>표본 통계량(sample statistics)</p></td>
<td class="text-align:center"><p><span class="math notranslate nohighlight">\(\hat \theta\)</span></p></td>
<td class="text-align:center"><p>표본의 특성값</p></td>
<td class="text-align:center"><p>표본 지지율</p></td>
</tr>
</tbody>
</table>
<p>일반적으로 통계학에서 표본으로 부터 얻어진 특성 값은 기호의 위에 모자(hat,<span class="math notranslate nohighlight">\(\hat{}\)</span>)을 붙여주며 이를 표본 통계량 또는 추정량(estimator)라고 부른다. 모집단의 특성을 나타내는 모수(parameter)는 보통 평균, 비율, 중간값, 특정 사건이 일어날 확률 등 분석의 목적에 따라서 다양한 형태로 나타난다.</p>
</div>
<div class="section" id="id3">
<h2><span class="section-number">6.2.2. </span>표본 통계량의 정확한 분포<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<p>통계량의 정확한 분포에 대하여 알아보기 위하여 선거 여론조사에 대한 아주 간단한 예를 들어보자</p>
<div class="section" id="id4">
<h3><span class="section-number">6.2.2.1. </span>모집단<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<p>모집단과 표본에 대한 간단한 예제를 들어보자. 모집단은 다음과 같이 5명의 사람들로 이루어진 집합이라고 하자.</p>
<div class="math notranslate nohighlight">
\[ P = \{ \text{철수, 영이, 둘리, 흥민, 연경} \}, \quad N = 5 \]</div>
<p>관심있는 모수 <span class="math notranslate nohighlight">\(\theta\)</span> 는 후보 A에 대한 지지율이다.</p>
<div class="math notranslate nohighlight">
\[ \theta = \frac{\text{모집단에서 후보 A를 지지하는 사람의 수}}{\text{모집단에 속한 사람의 수}}  \]</div>
<p>모집단에 속한 5명이 선거 후보 A에 대한 지지 여부를 다음과 같다. 선거 여론조사의 경우 모집단은 선거구 주민인 사람들로 이루어져 있지만 실제로 측정하는 값은 후보를 지지하는지에 대한 여부이다. A 후보를 지지하면 <span class="math notranslate nohighlight">\(x=1\)</span>, 지지하지 않으면 <span class="math notranslate nohighlight">\(x=0\)</span> 이라고 하자</p>
<ul class="simple">
<li><p>철수는 A 후보를 지지한다 (<span class="math notranslate nohighlight">\(x=1\)</span>)</p></li>
<li><p>영이는 A 후보를 지지한다 (<span class="math notranslate nohighlight">\(x=1\)</span>)</p></li>
<li><p>둘리는 A 후보를 반대한다 (<span class="math notranslate nohighlight">\(x=0\)</span>)</p></li>
<li><p>흥민는 A 후보를 반대한다 (<span class="math notranslate nohighlight">\(x=0\)</span>)</p></li>
<li><p>연경는 A 후보를 지지한다 (<span class="math notranslate nohighlight">\(x=1\)</span>)</p></li>
</ul>
<p>위의 경우 모집단 지지율 <span class="math notranslate nohighlight">\(\theta\)</span> 은 60%이다.</p>
<div class="math notranslate nohighlight">
\[ \theta = \frac{1+1+0+0+1}{5} = \frac{3}{5}= 0.6 \]</div>
</div>
<div class="section" id="id5">
<h3><span class="section-number">6.2.2.2. </span>표본<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<p>이제 5명의 모집단에서 단순임의추출로 3명의 표본을 추출하는 경우를 생각해 보자. 물론 비복원 추출이다.</p>
<p>3명의 표본을 추출한 후, 표본에 속한 <span class="math notranslate nohighlight">\(i\)</span> 번째 사람이 후보를 지지하면 <span class="math notranslate nohighlight">\(x_i=1\)</span>, 지지하지 않으면 <span class="math notranslate nohighlight">\(x_i=0\)</span> 이라고 하자. 이러한 경우 표본 지지율 <span class="math notranslate nohighlight">\(\hat \theta\)</span> 는  추출된 사람들의 관측값 <span class="math notranslate nohighlight">\(x_1, x_2,  x_3\)</span>의 평균 <span class="math notranslate nohighlight">\(\bar x\)</span>와 같다.</p>
<div class="math notranslate nohighlight">
\[ \hat \theta = \frac{\text{표본에서 후보 A를 지지하는 사람의 수}}{\text{표본에 속한 사람의 수}} = \frac{\sum_{i=1}^3 x_i }{n} = \bar x \]</div>
<p>3개의 표본을 추출한다면 나타날 수 있는 모든 가능한 표본은 몇 개일까? <span class="math notranslate nohighlight">\(N=5\)</span> 명의 사람들로 구성된 모집단에서 <span class="math notranslate nohighlight">\(n=3\)</span> 명의 표본을 추출할 때 모든 가능한 경우는 10가지이다.</p>
<div class="math notranslate nohighlight">
\[ {{N}\choose{n}}  ={{5}\choose{3}} = \frac{(5)(4)(3)}{(3)(2)(1)} = 10 \]</div>
<p>라이브러리 <code class="docutils literal notranslate"><span class="pre">itertools</span></code> 에 수록된 함수 <code class="docutils literal notranslate"><span class="pre">combinations</span></code> 를 사용하면 5명의 사람들로 구성된 모집단에서 3명을 임의추출할 때 나타날 수 있는 모든 경우의 표본을 구할 수 있다.함수 <code class="docutils literal notranslate"><span class="pre">combinations(P,</span> <span class="pre">n)</span></code> 은 리스트 <code class="docutils literal notranslate"><span class="pre">P</span></code> 에서 고려할 수 있는 <code class="docutils literal notranslate"><span class="pre">n</span></code> 개의 모든 조합을 구해준다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">combinations</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">P</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;철수&#39;</span><span class="p">,</span> <span class="s1">&#39;영이&#39;</span><span class="p">,</span> <span class="s1">&#39;둘리&#39;</span><span class="p">,</span> <span class="s1">&#39;흥민&#39;</span><span class="p">,</span> <span class="s1">&#39;연경&#39;</span><span class="p">]</span> 

<span class="n">N</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">P</span><span class="p">)</span>
<span class="n">n</span> <span class="o">=</span> <span class="mi">3</span>

<span class="n">all_possible_samples</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">sample</span> <span class="ow">in</span> <span class="n">combinations</span><span class="p">(</span><span class="n">P</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
    <span class="n">all_possible_samples</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>

<span class="n">all_possible_samples</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[(&#39;철수&#39;, &#39;영이&#39;, &#39;둘리&#39;),
 (&#39;철수&#39;, &#39;영이&#39;, &#39;흥민&#39;),
 (&#39;철수&#39;, &#39;영이&#39;, &#39;연경&#39;),
 (&#39;철수&#39;, &#39;둘리&#39;, &#39;흥민&#39;),
 (&#39;철수&#39;, &#39;둘리&#39;, &#39;연경&#39;),
 (&#39;철수&#39;, &#39;흥민&#39;, &#39;연경&#39;),
 (&#39;영이&#39;, &#39;둘리&#39;, &#39;흥민&#39;),
 (&#39;영이&#39;, &#39;둘리&#39;, &#39;연경&#39;),
 (&#39;영이&#39;, &#39;흥민&#39;, &#39;연경&#39;),
 (&#39;둘리&#39;, &#39;흥민&#39;, &#39;연경&#39;)]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">all_possible_num</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">all_possible_samples</span><span class="p">)</span>
<span class="n">all_possible_num</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>10
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="id6">
<h3><span class="section-number">6.2.2.3. </span>모든 가능한 표본의 분포<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<p>모집단에서 실제로 표본을 추출하면  10개의 가능한 표본들 중 하나가 추출될 것이다. 특정한 하나의 표본이 추출될 확률은 얼마인가? 단순임의추출을 사용하였으므로 10개의 가능한 표본들은 추출될 가능성이 모두 같다. 따라서 특정한 표본이 추출될 확률은 <span class="math notranslate nohighlight">\(1/10 = 0.1\)</span> 로 모두 동일하다.</p>
<div class="math notranslate nohighlight">
\[ P (\text{철수, 영이, 둘리}) = P (\text{철수, 영이, 흥민}) = \dots = P (\text{둘리, 흥민, 연경}) = \frac{1}{10} = \frac{1}{{{N}\choose{n}}} \]</div>
<p>관심있는 모수는 지지율이이므로 모집단을 사람의 지지 여부를 나타내는 값(숫자)으로 나타내보자. A후보를 지지하면 1, 반대하면 0으로 나타내면 모집단을 다음과 같이 1과 0으로 표시할 수 있다.</p>
<div class="math notranslate nohighlight">
\[ P=\{ 1, 1, 0, 0, 1 \} \]</div>
<p>이렇게 1인 3개, 0이 2개인 모집단 <span class="math notranslate nohighlight">\(P\)</span> 에서 3개의 숫자 <span class="math notranslate nohighlight">\(x_1, x_2, x_3\)</span> 로 구성된 표본 <span class="math notranslate nohighlight">\(S\)</span> 를 임의로 추출할 때 가능한 모든 표본을 구하고 각 표본으로 부터 표본 지지율을 구해보자.</p>
<p>예를 들어 표본이  <span class="math notranslate nohighlight">\(\{ 철수, 둘리, 연경 \}\)</span>으로 추출되면 표본은 다음과 같고 표본 지지율은 2/3 이다.</p>
<div class="math notranslate nohighlight">
\[ S = \{ x_1 = 1, x_2 =0, x_3 = 1 \} \]</div>
<div class="math notranslate nohighlight">
\[ \hat \theta = \frac{\sum_{i=1}^3 x_i}{3} = \frac{1+0+1}{3} = \frac{2}{3} \]</div>
<p>이제 파이썬 코드를 이용하여 모든 가능한 표본을 관측값 <span class="math notranslate nohighlight">\((x_1, x_2, x_3)\)</span> 로 표시해 보자.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">P</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span> 
<span class="n">n</span><span class="o">=</span><span class="mi">3</span>

<span class="n">all_possible_samples</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">sample</span> <span class="ow">in</span> <span class="n">combinations</span><span class="p">(</span><span class="n">P</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
    <span class="n">all_possible_samples</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>

<span class="n">all_possible_samples</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[(1, 1, 0),
 (1, 1, 0),
 (1, 1, 1),
 (1, 0, 0),
 (1, 0, 1),
 (1, 0, 1),
 (1, 0, 0),
 (1, 0, 1),
 (1, 0, 1),
 (0, 0, 1)]
</pre></div>
</div>
</div>
</div>
<p>이제 10개의 가능한 표본에 대하여  표본 지지율 <span class="math notranslate nohighlight">\(\hat \theta\)</span>로 구성된 벡터 <code class="docutils literal notranslate"><span class="pre">sample_rate</span></code> 에 다음과 같이 유리수로 만들어 보자.</p>
<p>아래 코드에서 사용한 함수 <code class="docutils literal notranslate"><span class="pre">Fraction(x,y)</span></code> 는 분자를 <code class="docutils literal notranslate"><span class="pre">x</span></code>, 분모를 <code class="docutils literal notranslate"><span class="pre">y</span></code> 로 하는 유리수(rational number)를 만들어 준다. 이때 <code class="docutils literal notranslate"><span class="pre">x</span></code>와 <code class="docutils literal notranslate"><span class="pre">y</span></code> 는 모두 정수형 형식이어야 한다. 지지율을 부동소수점이 아닌  유리수로 계산하는 이유는 유리수의 값으로  <code class="docutils literal notranslate"><span class="pre">groupby</span></code> 메소드를 이용하여  그룹화하기 위해서이다.</p>
<div class="math notranslate nohighlight">
\[ \texttt{ Fraction(x,y) } = \frac{x}{y} \]</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">fractions</span> <span class="kn">import</span> <span class="n">Fraction</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sample_rate</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">sample</span> <span class="ow">in</span> <span class="n">all_possible_samples</span><span class="p">:</span>
  <span class="n">sample_rate</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Fraction</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">sample</span><span class="p">)),</span><span class="n">n</span><span class="p">))</span>

<span class="n">sample_rate</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[Fraction(2, 3),
 Fraction(2, 3),
 Fraction(1, 1),
 Fraction(1, 3),
 Fraction(2, 3),
 Fraction(2, 3),
 Fraction(1, 3),
 Fraction(2, 3),
 Fraction(2, 3),
 Fraction(1, 3)]
</pre></div>
</div>
</div>
</div>
<p>리스트 <code class="docutils literal notranslate"><span class="pre">sample_rate</span></code> 에 저장된 10개의 표본 지지율이 나타날 확률은 모두 동일하게 0.1 이다. 10개의 표본 지지율과 각 확률 0.1 을 데이터프레임 <code class="docutils literal notranslate"><span class="pre">sample_rate_dist</span></code> 으로 만들자.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sample_rate_dist</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;sample_rate&#39;</span><span class="p">:</span><span class="n">sample_rate</span><span class="p">,</span> <span class="s1">&#39;probability&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="n">all_possible_num</span><span class="p">,</span> <span class="n">all_possible_num</span><span class="p">)})</span>
<span class="n">sample_rate_dist</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>sample_rate</th>
      <th>probability</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2/3</td>
      <td>0.1</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2/3</td>
      <td>0.1</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1</td>
      <td>0.1</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1/3</td>
      <td>0.1</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2/3</td>
      <td>0.1</td>
    </tr>
    <tr>
      <th>5</th>
      <td>2/3</td>
      <td>0.1</td>
    </tr>
    <tr>
      <th>6</th>
      <td>1/3</td>
      <td>0.1</td>
    </tr>
    <tr>
      <th>7</th>
      <td>2/3</td>
      <td>0.1</td>
    </tr>
    <tr>
      <th>8</th>
      <td>2/3</td>
      <td>0.1</td>
    </tr>
    <tr>
      <th>9</th>
      <td>1/3</td>
      <td>0.1</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</div>
<div class="section" id="id7">
<h3><span class="section-number">6.2.2.4. </span>통계량의 정확한 분포<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<p>함수 <code class="docutils literal notranslate"><span class="pre">groupby()</span></code>를  이용하여 지지율 <code class="docutils literal notranslate"><span class="pre">sample_rate</span></code> 을 이용하여 그룹화 한 후, 각 그룹에 대한  확률 <code class="docutils literal notranslate"><span class="pre">probability</span></code>의 합을 구하자.</p>
<p>이제 우리는 표본 지지율에 대한 정확한 분포를 다음과 같이 구할 수 있다.</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="text-align:center head"><p>표본 지지율 (<span class="math notranslate nohighlight">\(\hat \theta\)</span>)</p></th>
<th class="text-align:center head"><p>1/3</p></th>
<th class="text-align:center head"><p>2/3</p></th>
<th class="text-align:center head"><p>1</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-align:center"><p>확률 (probability)</p></td>
<td class="text-align:center"><p>0.3</p></td>
<td class="text-align:center"><p>0.6</p></td>
<td class="text-align:center"><p>0.1</p></td>
</tr>
</tbody>
</table>
<p>위의 확률분포는 크기가 5인 모집단에서 3개의 표본을 추출하는 경우 관측할 수 있는 표본 지지율의 분포를 나타내는 것이다. 예를 들어 표본 지지율이 <span class="math notranslate nohighlight">\(1/3=33.3\%\)</span> 일 확률은 0.3이다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sample_rate_dist</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="n">sample_rate</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;index&#39;</span><span class="p">:</span><span class="s1">&#39;표본 지지율&#39;</span><span class="p">})</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>표본 지지율</th>
      <th>probability</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1/3</td>
      <td>0.3</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2/3</td>
      <td>0.6</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1</td>
      <td>0.1</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>이제 좀 더 큰 모집단에 대한 예를 생각해 보자.</p>
<p>선거구에 10,000명의 주민들이 있다고 하자. 10,000 명의 주민들 중에 60%가 A 후보를 지지한다. 만약 10,000명의 주민들 중 100 명을 표본으로 추출하면 표본 지지율의 정확한 분포는 어떻게 나타날까?</p>
<p>위에서 본 예제와 유사하게 모든 가능한 표본을 구하여 각 표본으로 부터 구한 지지율을 구하고 통계량의 정확한  분포를 구해보면 되겠지만 10,000명의 주민들에서 100 명을 추출할 때 가능한 표본의 수는 너무나 크다.</p>
<div class="math notranslate nohighlight">
\[ {{N}\choose{n}} = {{10,000}\choose{100}} \]</div>
<p>최근 컴퓨터의 처리 속도가 정말 빨라졌지만 실제로 이러한 큰 수의 조합을 처리하기란 쉬운 일이 아니다.</p>
</div>
</div>
<div class="section" id="id8">
<h2><span class="section-number">6.2.3. </span>표본 통계량의 경험적 분포<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h2>
<p>위의 예제에서 처럼 모든 가능한 표본의 개수가 너무 많으면 가능한 모든 표본들을 고려하여 관심있는 통계량 <span class="math notranslate nohighlight">\(\hat \theta\)</span> 의 정확한 분포를 구하는 것은 거의 불가능하다.</p>
<p>이런 경우 우리는 가능한 표본을 모두 고려하지 않고 모집단에서 많은 수의 표본을 독립적으로 임의추출하는 모의실험(simulation)을 통하여 추정량의 경험적 분포를 구할 수 있다.</p>
<div class="section" id="id9">
<h3><span class="section-number">6.2.3.1. </span>모의실험<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h3>
<p>주민 10,000 명으로 구성된  모집단에서 60%가  A 후보를 지지한다고 가정하고 100명을 표본으로 추출할 때  표본 지지율의 경험적 분포를 다음과 같이 모의실험을 통해서 구할 수 있다.</p>
<ol class="simple">
<li><p>지지율이 60%인  모집단을 만든다 (1 이 6000개, 0 이 4000개로 이루어진 집합)</p></li>
<li><p>모집단에서 100개의 표본을 임의 추출한다.</p></li>
<li><p>추출된 표본으로부터 표본 지지율 <span class="math notranslate nohighlight">\(\hat \theta\)</span> 을 계산한다.</p></li>
<li><p>(2)와 (3)을  B =1000 번 반복한다.</p></li>
</ol>
<p><span class="math notranslate nohighlight">\(\hat \theta_i\)</span> 를 <span class="math notranslate nohighlight">\(i\)</span> 번째 표본에서 얻은 표본 지지율이라고 한다면 위의 모의실험 절차에서   1000개의 표본 지지율을 얻을 수 있다.</p>
<div class="math notranslate nohighlight">
\[ \hat \theta_1, \hat \theta_2, \dots, \hat \theta_{1000} \]</div>
<p>이렇게 모의실험을 통하여 얻은 <strong>1000개의 표본 지지율의 경험적 분포</strong>는 표본 지지율의 정확한 분포와
매우 유사하다.</p>
<div class="math notranslate nohighlight">
\[ \text{모의실험을 통한 통계량의 경험적 분포} \approx \text{통계량의 정확한 분포} \]</div>
<p>통계량의 정확한 분포를 쉽게 파악할 수 없는 경우 모의실험을 통해서 통계량의 경험적 분포를 구하고 이를 통계량의 여러 가지 확률적 성질를 알아보는데 사용할 수 있다.</p>
<p>모의실험의 반복 횟수 <span class="math notranslate nohighlight">\(B\)</span> 는 클수록 좋으며 일반적으로 500 이상의 수를 고려한다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 모집단을 만든다.</span>
<span class="n">P</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">((</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">6000</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">4000</span><span class="p">)),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">P</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.6
</pre></div>
</div>
</div>
</div>
<p>이제 반복적으로 표본을 추출하고 계산된 표본 지지율을 데이터프레임 <code class="docutils literal notranslate"><span class="pre">simulation_sample_rate</span></code> 에 저장한다.</p>
<p>함수 <code class="docutils literal notranslate"><span class="pre">np.random.choice(P,</span> <span class="pre">n,</span> <span class="pre">replace=False)</span></code> 는 리스트 또는 벡터 <code class="docutils literal notranslate"><span class="pre">P</span></code> 에서 <code class="docutils literal notranslate"><span class="pre">n</span></code> 개로 구성된 표본을 비복원추출로 뽑으라는 함수이다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">B</span> <span class="o">=</span> <span class="mi">1000</span> <span class="c1"># 모의실험의 횟수</span>

<span class="n">n</span> <span class="o">=</span> <span class="mi">100</span>  <span class="c1"># 표본의 개수</span>

<span class="n">simulation_sample_rate</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;표본지지율&#39;</span><span class="p">:</span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">B</span><span class="p">)})</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">B</span><span class="p">):</span>
  <span class="n">sample</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">P</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">replace</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
  <span class="n">simulation_sample_rate</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="s1">&#39;표본지지율&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>

<span class="n">simulation_sample_rate</span>  
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>표본지지율</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0.59</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0.60</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0.60</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0.56</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0.62</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
    </tr>
    <tr>
      <th>995</th>
      <td>0.54</td>
    </tr>
    <tr>
      <th>996</th>
      <td>0.60</td>
    </tr>
    <tr>
      <th>997</th>
      <td>0.60</td>
    </tr>
    <tr>
      <th>998</th>
      <td>0.57</td>
    </tr>
    <tr>
      <th>999</th>
      <td>0.67</td>
    </tr>
  </tbody>
</table>
<p>1000 rows × 1 columns</p>
</div></div></div>
</div>
<p>1000개의 표본 지지율의 경험적 분포는 다음과 같다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">simulation_sample_rate</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">bins</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;matplotlib.axes._subplots.AxesSubplot at 0x7fe54f176dd0&gt;
</pre></div>
</div>
<img alt="../../_images/samplemeans_27_1.png" src="../../_images/samplemeans_27_1.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">simulation_sample_rate</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">box</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;matplotlib.axes._subplots.AxesSubplot at 0x7fe54f0ff7d0&gt;
</pre></div>
</div>
<img alt="../../_images/samplemeans_28_1.png" src="../../_images/samplemeans_28_1.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">simulation_sample_rate</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>표본지지율</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>1000.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>0.598050</td>
    </tr>
    <tr>
      <th>std</th>
      <td>0.049683</td>
    </tr>
    <tr>
      <th>min</th>
      <td>0.450000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>0.560000</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>0.600000</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>0.630000</td>
    </tr>
    <tr>
      <th>max</th>
      <td>0.740000</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</div>
<div class="section" id="id10">
<h3><span class="section-number">6.2.3.2. </span>통계량의 분포<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h3>
<p>앞 절에서 보았듯이 표본의 개수가 증가하면 표본 평균이 점점 모집단 평균에 더 가까이 접근하는 사실을 알 수 있다. 표본은 임의로 추출하는 것이기 때문에 추출 전에는 어떤 표본이 나올지 알 수 없으며  서로 다른 두 사람이  같은 모집단에서 표본을 추출해도 두 사람의 표본이 같을 가능성은 거의 없다. 즉, 눈 감고 뽑는 임의성(randomness) 때문에 표본은 추출할 때 마다 다른 관측값들이 나온다. 따라서 표본으로 부터 계산한 통계량도 임의성을 가진다. 따라서 <strong>임의성을 가진 표본 통계량은 분포를 가진다.</strong></p>
<p>표본 통계량의 분포가 왜 중요할까? 앞에서 말한대로 표본 통계량은 임의성을 가지고 있기 때문에 어떤 값이 나올지 예측할 수 없다. 하지만 분포는 관측할 수 있는 값의 가능성을 나타내는 측도이다. 따라서 표본 통계량의 분포를 알고 있다면 우리가 표본 통계량을 이용하여 <strong>모수를 추정하는 방법이 얼마나 합리적인지 판단할 수 있는 근거</strong> 를 제시할 수 있다.</p>
<p>하지만 앞에서 잠깐 언급하였듯이 <strong>표본 통계량의 정확한 분포를 구하는 것은 대부분의 경우 매우 어렵다.</strong> 이러한 이유로 우리는 표본 통계량의 경험적 분포를 구하고 이를 통계량 분포의 특성을 근사적으로 파악하는데 사용한다.</p>
<p>하지만 표본 통계량의 경험적 분포는 어떻게 알 수 있을까? 이 절에서 우리는 모집단 전체를 알고 있기 때문에 모집단에서 표본을 반복적으로 추출하는 모의실험으로 표본 통계량의 경험적 분포를 구할 수 있다.
모집단이 어떻게 구성되어 있는지 모르는 경우는 다음 절에서 논의할 것이다.</p>
<p>모의실험(simulation)은 많은 사람이 독립적으로 모집단에서 표본을 임의로 추출하는 행동을 컴푸터가 대신 실행해주는 것이다.  다시 한번 강조하지만 임의성을 가진 통계량이 어떤 분포에 가지는지 그 성질을 이해하는 것이 중요하며 통계량의 경험적 분포를 파악하기 위하여 모의실험을 사용하는 것이다.</p>
</div>
</div>
<div class="section" id="id11">
<h2><span class="section-number">6.2.4. </span>표본평균의 분포: 예제<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h2>
<p>이제 통계량의 분포에 대한 성질을 더 알아보기 위하여 실제 자료를 이용해 보자. 사용될 자료는 앞 정에서 사용한 것과 동일한 2019년 9월 동안 서울특별시 공공자전거 대여 이력 자료이다.</p>
<p>이제 우리는 2019년 9월 동안 대여된 공공 자전거를 사용할 때 <strong>이용거리의 평균</strong>을 관심있는 모수로 정한다.
일단 <strong>데이터프레임 <code class="docutils literal notranslate"><span class="pre">bike</span></code> 는 모집단이다. 즉,  2019년 9월에 발생한 모든 대여 정보를 수록한 자료이므로 모집단이라고 할 수 있다.</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">url1</span> <span class="o">=</span> <span class="s2">&quot;https://ilovedata.github.io/teaching/bigdata2/data/seoul_bike_201909_3.csv&quot;</span>
<span class="n">bike</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">url1</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;CP949&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">bike</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>자전거번호</th>
      <th>대여일시</th>
      <th>대여 대여소번호</th>
      <th>대여 대여소명</th>
      <th>대여거치대</th>
      <th>반납일시</th>
      <th>반납대여소번호</th>
      <th>반납대여소명</th>
      <th>반납거치대</th>
      <th>이용시간</th>
      <th>이용거리</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>SPB-17003</td>
      <td>2019-09-28 16:10:55</td>
      <td>368</td>
      <td>SK 서린빌딩 앞</td>
      <td>4</td>
      <td>2019-09-28 17:03:32</td>
      <td>2002</td>
      <td>노들역 1번출구</td>
      <td>14</td>
      <td>52</td>
      <td>8940.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>SPB-14405</td>
      <td>2019-09-28 16:48:16</td>
      <td>2024</td>
      <td>상도역 1번출구</td>
      <td>3</td>
      <td>2019-09-28 17:03:44</td>
      <td>2002</td>
      <td>노들역 1번출구</td>
      <td>18</td>
      <td>15</td>
      <td>1910.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>SPB-18431</td>
      <td>2019-09-28 16:59:54</td>
      <td>2002</td>
      <td>노들역 1번출구</td>
      <td>10</td>
      <td>2019-09-28 17:03:57</td>
      <td>2002</td>
      <td>노들역 1번출구</td>
      <td>10</td>
      <td>2</td>
      <td>30.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>SPB-04853</td>
      <td>2019-09-28 15:31:49</td>
      <td>207</td>
      <td>여의나루역 1번출구 앞</td>
      <td>32</td>
      <td>2019-09-28 17:10:12</td>
      <td>2002</td>
      <td>노들역 1번출구</td>
      <td>19</td>
      <td>98</td>
      <td>9610.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>SPB-11122</td>
      <td>2019-09-28 15:35:41</td>
      <td>207</td>
      <td>여의나루역 1번출구 앞</td>
      <td>14</td>
      <td>2019-09-28 17:10:37</td>
      <td>2002</td>
      <td>노들역 1번출구</td>
      <td>18</td>
      <td>90</td>
      <td>9450.0</td>
    </tr>
    <tr>
      <th>5</th>
      <td>SPB-23089</td>
      <td>2019-09-28 17:02:37</td>
      <td>2003</td>
      <td>사육신공원앞</td>
      <td>5</td>
      <td>2019-09-28 17:13:44</td>
      <td>2002</td>
      <td>노들역 1번출구</td>
      <td>10</td>
      <td>10</td>
      <td>1410.0</td>
    </tr>
    <tr>
      <th>6</th>
      <td>SPB-15669</td>
      <td>2019-09-28 16:17:54</td>
      <td>2213</td>
      <td>고속터미널역 5번출구 앞</td>
      <td>7</td>
      <td>2019-09-28 17:14:22</td>
      <td>2002</td>
      <td>노들역 1번출구</td>
      <td>8</td>
      <td>56</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>7</th>
      <td>SPB-09727</td>
      <td>2019-09-28 17:04:56</td>
      <td>2002</td>
      <td>노들역 1번출구</td>
      <td>5</td>
      <td>2019-09-28 17:17:10</td>
      <td>2002</td>
      <td>노들역 1번출구</td>
      <td>17</td>
      <td>11</td>
      <td>380.0</td>
    </tr>
    <tr>
      <th>8</th>
      <td>SPB-10053</td>
      <td>2019-09-28 16:59:45</td>
      <td>2002</td>
      <td>노들역 1번출구</td>
      <td>3</td>
      <td>2019-09-28 17:17:53</td>
      <td>2002</td>
      <td>노들역 1번출구</td>
      <td>5</td>
      <td>17</td>
      <td>1080.0</td>
    </tr>
    <tr>
      <th>9</th>
      <td>SPB-14487</td>
      <td>2019-09-28 16:01:41</td>
      <td>2024</td>
      <td>상도역 1번출구</td>
      <td>5</td>
      <td>2019-09-28 17:20:44</td>
      <td>2002</td>
      <td>노들역 1번출구</td>
      <td>14</td>
      <td>78</td>
      <td>13870.0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">bike</span><span class="o">.</span><span class="n">shape</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(407589, 11)
</pre></div>
</div>
</div>
</div>
<p>이제 공공자전거 모집단에서  표본을  비복원추출법으로 단순임의추출하는 경우를 생각해 보자.</p>
<p>공공자전거 모집단의 크기는 <span class="math notranslate nohighlight">\(N=407,589\)</span> 으로  상당히 크다.  만약 우리가 추출할 수 있는 표본의 크기가 최대 <span class="math notranslate nohighlight">\(n=2000\)</span> 개라면 표본의 크기에 대한 모집단의 크기는 상대적으로 매우 크다. 일반적으로 모집단의 크기가 표본의 크기에 비하여 상대적으로 매우 크면 다음과 같은 점에 유의해야 한다.</p>
<ul class="simple">
<li><p>한 명의 사람이 추출해서 얻은 표본이 다른 사람이 독립적으로 추출한 표본과 일치할 가능성의 거의 없다. 왜냐하면 모집단의 크기가 매우 크기 떄문이다. 407,589 개의 자료에서 두 사람의 표본이 일치할 가능성은 거의 없다(일치할 확률이 0은 아니다, 단지 매우 작아서 무시할 수 있다는 의미이다)</p></li>
<li><p>모집단의 크기가 매우 크고 표본의 크기가 상대적으로 작은 경우 추출된 자료를 다시 복원하더라도 다시 추출될 확률은 매우 작다. 이러한 경우 비복원추출과 복원추출 방법은 거의 동일한 방법이다. 따라서 비복원추출과 복원추출을 따로 구별할 필요가 없다.</p></li>
</ul>
<p>이제 빅데이터개론2를 수강하는 학생들이  동일한 모집단에서 각자 독립적으로 표본을 추출한다고 생각해 보자. 각자 얻은 표본이 다를 것이고 따라서 표본 통계량도 다르게 나타날 것이다. 추출할 때마다 다르게 나오는 표본 통계량이 어떤 곳에 집중되어 나타나고 얼마나 퍼져서 나타나는지를 나타내는 표본 통계량의 경험적 분포를 구해보자. 이렇게 구한 경험적 분포는  통계량의 정확한 분포와 매우 유사하다.</p>
<p>빅데이터개론2를 수강하는 학생들이 일일이 모집단에서 손으로 표본을 추출할 수 없으니 표본의 추출을 파이썬 프로그램을 이용하여 컴퓨터가 모의실험을 수행할 수 있도록 해보자.</p>
<p>표본의 개수가 <span class="math notranslate nohighlight">\(n=50\)</span> 인 표본을  모의 실험으로 <span class="math notranslate nohighlight">\(B=1000\)</span> 개 만든다면 각 표본으로부터 계산한 표본평균의 분포는 어떤 모습일까?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">B</span> <span class="o">=</span> <span class="mi">1000</span>

<span class="n">sample_means_50</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span> <span class="p">{</span><span class="s1">&#39;sample_means&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">B</span><span class="p">)})</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">B</span><span class="p">):</span>
  <span class="n">sample_means_50</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="s1">&#39;sample_means&#39;</span><span class="p">]</span> <span class="o">=</span><span class="n">bike</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">replace</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">이용거리</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sample_means_50</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">bins</span><span class="o">=</span> <span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;matplotlib.axes._subplots.AxesSubplot at 0x7fe54f0b7690&gt;
</pre></div>
</div>
<img alt="../../_images/samplemeans_38_1.png" src="../../_images/samplemeans_38_1.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sample_means_50</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">box</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;matplotlib.axes._subplots.AxesSubplot at 0x7fe549ee1b50&gt;
</pre></div>
</div>
<img alt="../../_images/samplemeans_39_1.png" src="../../_images/samplemeans_39_1.png" />
</div>
</div>
<p>이제 표본의 개수를 <span class="math notranslate nohighlight">\(n=1000\)</span> 개로 늘려서 모의실험으로 <span class="math notranslate nohighlight">\(B=1000\)</span> 개의 표본을 추출한 후, 표본 평균들을 구하여 그 분포를 살펴보자.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sample_means_1000</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span> <span class="p">{</span><span class="s1">&#39;sample_means&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">B</span><span class="p">)})</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">B</span><span class="p">):</span>
  <span class="n">sample_means_1000</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="s1">&#39;sample_means&#39;</span><span class="p">]</span> <span class="o">=</span><span class="n">bike</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">replace</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">이용거리</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sample_means_1000</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">bins</span><span class="o">=</span> <span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;matplotlib.axes._subplots.AxesSubplot at 0x7fe54f0cd650&gt;
</pre></div>
</div>
<img alt="../../_images/samplemeans_42_1.png" src="../../_images/samplemeans_42_1.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sample_means_1000</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">box</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;matplotlib.axes._subplots.AxesSubplot at 0x7fe549db2dd0&gt;
</pre></div>
</div>
<img alt="../../_images/samplemeans_43_1.png" src="../../_images/samplemeans_43_1.png" />
</div>
</div>
<p>이제 표본의 크기가 50개인 격우 표본 평균들의 경험적 분포와 표본의 크기가 1000개인 경우 표본 평균들의 경험적 분포를 상자그림으로 비교해 보자. 가로로 그은 빨간선은 모집단의 평균을 나타낸다.</p>
<p>여러분이 예상할 수 있듯이 표본의 크기가 1000인 경우가 50인 경우보다 표본평균들의 분포가 모집단 주위에 더욱 가깝게 몰려있는 것을 알 수 있다. 또한 표본의 크기가 1000인 경우 표본 평균의 경험적 분포는 좌우 대칭인 종모양으로 나타난다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">nrows</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">ncols</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>

<span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">sample_means_50</span><span class="o">.</span><span class="n">sample_means</span><span class="p">)</span>
<span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span><span class="mi">7000</span><span class="p">)</span>
<span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;n=50&#39;</span><span class="p">)</span>
<span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">hlines</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mf">4253.336228</span><span class="p">,</span> <span class="n">xmin</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">xmax</span><span class="o">=</span><span class="mf">1.5</span><span class="p">,</span> <span class="n">colors</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>

<span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">sample_means_1000</span><span class="o">.</span><span class="n">sample_means</span><span class="p">)</span>
<span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span><span class="mi">7000</span><span class="p">)</span>
<span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;n=1000&#39;</span><span class="p">)</span>
<span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">hlines</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mf">4253.336228</span><span class="p">,</span> <span class="n">xmin</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">xmax</span><span class="o">=</span><span class="mf">1.5</span><span class="p">,</span> <span class="n">colors</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/samplemeans_45_0.png" src="../../_images/samplemeans_45_0.png" />
</div>
</div>
<p>이제 표본의 개수를 점점 크게하면서, 표본 평균들의 경험적 분포가 어떻게 변화하는지 알아보자.</p>
<ol class="simple">
<li><p>표본의 개수를 <span class="math notranslate nohighlight">\(n=100\)</span> 부터 시작하여 <span class="math notranslate nohighlight">\(n=2000\)</span> 까지 점점 증가시킨다.</p></li>
<li><p>주어진 표본의 크기에 대하여 모의실험으로 <span class="math notranslate nohighlight">\(B=100\)</span> 개의 표본들을 추출하고 표본 평균들을 구한다.</p></li>
<li><p>표본의 개수에 따른 표본평균들의 분포를 상자그림으로 그려서 비교한다.</p></li>
</ol>
<p>참고로 모의실험의 반복 수를 <span class="math notranslate nohighlight">\(B=100\)</span> 을 선택한 이유는 반복 수를  <span class="math notranslate nohighlight">\(B=1000\)</span> 으로 하면 실행하는데 너무 오랜 시간이 걸리기 떄문이다.</p>
<p>아래 상자그림을 보면 <strong>표본의 개수가 증가할수록</strong> 표본 평균의 경험적 분포가 다음과 같은 성질을 보인다.</p>
<ul class="simple">
<li><p>모집단의 평균 주위에 더 조밀하게 집중된다. 즉, 분포의 퍼진 정도가 줄어든다.</p></li>
<li><p>분포의 모양이 좌우가 대칭인 종모양에 가까워 진다.</p></li>
</ul>
<p>여기서 하나 주목할 점은 <strong>모집단의 분포는 종모양과는 전혀 다른 오른쪽으로 꼬리가 긴 비대칭 분포이다.</strong> 하지만 표본 평균의 경험적 분포는 표본의 크기가 증가하면 대칭인 종모양에 가까워 진다.</p>
<p>여기서 주의할 점은 다음 두 분포를 구별할 수 있어야 한다.</p>
<ul class="simple">
<li><p>표본의 경험적 분포</p></li>
<li><p>표본 통계량의 경험적 분포</p></li>
</ul>
<p>우리가 지금 다루고 있는 분포는 표본 통계량의 경험적 분포이다. 앞 절에서 다룬 <strong>표본의 경험적 분포는 표본을 구성하는 관측값들의 분포</strong> 이며 이는 표본이 한 개만 있어도 구할 수 있다. 왜냐하면 표본 안에는 여러 개의 값들이 있기 때문이다.</p>
<p>표본 통계량은 표본에 속한 관측값들로 계산한 한 개의 값이므로(예를 들어 표본 평균) 분포를 구하려면 표본이 여러 개 필요하다. 이것이 표본 통계량의 경험적 분포를 구하기 위하여 여러 개의 표본을 추출하는 모의실험을 수행하는 이유이다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">B</span> <span class="o">=</span> <span class="mi">100</span> <span class="c1"># 모의실험의 반복 수 </span>

<span class="n">n</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">50</span><span class="p">,</span><span class="mi">100</span><span class="p">])</span> <span class="c1"># 표본의 개수</span>
<span class="n">n</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="mi">2101</span><span class="p">,</span><span class="mi">200</span><span class="p">))</span> 
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">n</span> <span class="c1"># 모의실험에서 고려한 표본의 개수들</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([  10,   20,   50,  100,  200,  400,  600,  800, 1000, 1200, 1400,
       1600, 1800, 2000])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sample_means</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span> <span class="n">array</span><span class="p">([])</span>

<span class="k">for</span> <span class="n">samplesize</span> <span class="ow">in</span> <span class="n">n</span><span class="p">:</span>
  <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">B</span><span class="p">):</span>
    <span class="n">sample_means</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sample_means</span><span class="p">,</span> <span class="n">bike</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="n">samplesize</span><span class="p">,</span> <span class="n">replace</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">이용거리</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span>

<span class="n">sample_size</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="n">B</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="s2">&quot;category&quot;</span><span class="p">)</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;sample_size&#39;</span><span class="p">:</span><span class="n">sample_size</span><span class="p">,</span> <span class="s1">&#39;sample_mean&#39;</span><span class="p">:</span><span class="n">sample_means</span><span class="p">})</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>sample_size</th>
      <th>sample_mean</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>10</td>
      <td>1394.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>10</td>
      <td>3784.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>10</td>
      <td>4496.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>10</td>
      <td>2850.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>10</td>
      <td>3571.0</td>
    </tr>
    <tr>
      <th>5</th>
      <td>10</td>
      <td>6980.0</td>
    </tr>
    <tr>
      <th>6</th>
      <td>10</td>
      <td>3135.0</td>
    </tr>
    <tr>
      <th>7</th>
      <td>10</td>
      <td>6254.0</td>
    </tr>
    <tr>
      <th>8</th>
      <td>10</td>
      <td>4083.0</td>
    </tr>
    <tr>
      <th>9</th>
      <td>10</td>
      <td>4690.0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ax</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;sample_size&#39;</span><span class="p">)</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">hlines</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mf">4253.336228</span><span class="p">,</span> <span class="n">xmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">xmax</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">colors</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/samplemeans_51_0.png" src="../../_images/samplemeans_51_0.png" />
</div>
</div>
</div>
<div class="section" id="id12">
<h2><span class="section-number">6.2.5. </span>정리<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h2>
<p>우리는 지금까지 모집단 전체에 대한 정보를 알고 있다고 가정하고 모의실험을 통하여 단순임의추출로 얻은 표본 평균의 경험적 분포가 표본의 개수에 따라서 어떻게 변하는지 살펴보있다.</p>
<p>표본의 크기가 증가하면 표본 평균의 경험적 분포가 실제 평균 주위에 어떻게 집중되고 얼마나 퍼져서 나타나는지에 대하여 알 수 있었다. 예를 들어 공공자전거 자료에서 이용거리의 평균을 알고 싶을 때를 생각해 보자.  <span class="math notranslate nohighlight">\(n=2000\)</span> 개의 표본을 추출하는 경우 모의실험으로 구한 100개의 표본 평균들이 실제 평균 <span class="math notranslate nohighlight">\(4253.336228\)</span> 주위에 얼마나 집중되어 있는지 <span class="math notranslate nohighlight">\(n=50\)</span> 개의 표본을 추출하는 경우와 비교할 수 있었다.</p>
<p>이제  <strong>모집단의 정보가 없는 실제 상황</strong> 을 생각해 보자. 만약 우리가 2019년 9월 공공 자전거 대여이력에 대한 전체 자료가 없어서 표본을 추출한다고 가정해 보자. 모집단을 알 수 없으므로 지금까지 우리가 사용한 모의실험을 수행할 수가 없고 표본 평균의 경험적 분포도 알 수 없다.</p>
<p>또한 실제로 데이터를 분석하는 경우 여러 개의 표본이 주어지지 않는다. <strong>표본은 한 번 만 추출할 수 있다</strong>. 실제 상황에서  우리가 얻을 수 있는 것은  1개의 표본과 이를 통해서 얻은 1개의 표본 평균이다.</p>
<p>이렇게 실제 상황에 처한 우리들은 몇 개의 표본을 추출하는게 적절한지, 추출된 표본으로 부터 얻은 표본 통계량이 신뢰할 수 있는지 등 많은 질문에 대한 설득력 있는  대답을 할 수 없을 것 같아 보인다.</p>
<p>하지만 통계학은 1개의 표본을 얻는다 하더라도 표본의 크기가 어느 정도 크면(약 <span class="math notranslate nohighlight">\(n=50\)</span> 개 이상이면) 모집단에 대한 정보가 하나도 없더라도 표본 통계량의 분포를 근사적으로 구할 수 있는 <strong>강력한 무기</strong>를 제공한다.
이 강력하고 유용한 무기를 우리는 <strong>중심극한정리(Central Limit Theorem)</strong> 라고 부르며 다음 절에서 배울 것이다.</p>
<p>마지막으로 꼭 기억해야할 점은 강력하고 유용한 무기인 중심극한정리를 사용하려면 표본이 확률표본(random sample)이어야 한다. 만약 여러분이 편의표본 또는 비확률표본을 가지고 있다면 이 강력한 무기를 사용할 수 없다.</p>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./chapters/06"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
            <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="sample.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title"><span class="section-number">6.1. </span>표본과 정보</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="estimator.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">6.3. </span>추정량의 성질</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
        
        </div>
    </div>
    <footer class="footer">
    <div class="container">
      <p>
        
          By 서울시립대학교<br/>
        
            &copy; Copyright 2021.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="../../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>